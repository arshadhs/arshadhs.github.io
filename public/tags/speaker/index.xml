<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Speaker on Arshad Siddiqui</title>
    <link>http://localhost:1313/tags/speaker/</link>
    <description>Recent content in Speaker on Arshad Siddiqui</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 13 Nov 2018 20:45:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/speaker/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Bluetooth Speaker</title>
      <link>http://localhost:1313/docs/technology/bluetoothspeakerraspberrypi/</link>
      <pubDate>Tue, 13 Nov 2018 20:45:00 +0000</pubDate>
      <guid>http://localhost:1313/docs/technology/bluetoothspeakerraspberrypi/</guid>
      <description>&lt;h1 id=&#34;raspberry-pi--connect-bluetooth-speaker&#34;&gt;&#xA;  Raspberry Pi : Connect Bluetooth Speaker&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#raspberry-pi--connect-bluetooth-speaker&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h1&gt;&#xA;&lt;p&gt;Connecting Raspberry Pi to Mi Pocket Speaker 2&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-pi@raspberrypi:~&#34; data-lang=&#34;pi@raspberrypi:~&#34;&gt;[bluetooth]# power on&#xD;&#xA;Changing power on succeeded&#xD;&#xA;[bluetooth]# agent on&#xD;&#xA;Agent registered&#xD;&#xA;[bluetooth]# scan on&#xD;&#xA;Discovery started&#xD;&#xA;[CHG] Controller B8:27:EB:79:F6:B7 Discovering: yes&#xD;&#xA;[bluetooth]# default-agent&#xD;&#xA;Default agent request successful&#xD;&#xA;[CHG] Device 00:EC:0A:57:F2:65 LegacyPairing: yes&#xD;&#xA;[bluetooth]# list&#xD;&#xA;Controller B8:27:EB:79:F6:B7 raspberrypi [default]&#xD;&#xA;[bluetooth]# devices&#xD;&#xA;Device 5C:72:FE:B7:35:FD 5C-72-FE-B7-35-FD&#xD;&#xA;Device 28:F0:76:0A:B9:7B 28-F0-76-0A-B9-7B&#xD;&#xA;Device 00:EC:0A:57:F2:65 Redmi&#xD;&#xA;[NEW] Device 74:A3:4A:15:DD:71 Mi Pocket Speaker 2&#xD;&#xA;[bluetooth]# pair 74:A3:4A:15:DD:71&#xD;&#xA;Attempting to pair with 74:A3:4A:15:DD:71&#xD;&#xA;[CHG] Device 74:A3:4A:15:DD:71 Connected: yes&#xD;&#xA;[CHG] Device 74:A3:4A:15:DD:71 UUIDs:&#xD;&#xA;        00001108-0000-1000-8000-00805f9b34fb&#xD;&#xA;        0000110b-0000-1000-8000-00805f9b34fb&#xD;&#xA;        0000110c-0000-1000-8000-00805f9b34fb&#xD;&#xA;        0000110e-0000-1000-8000-00805f9b34fb&#xD;&#xA;        0000111e-0000-1000-8000-00805f9b34fb&#xD;&#xA;[CHG] Device 74:A3:4A:15:DD:71 Paired: yes&#xD;&#xA;Pairing successful&#xD;&#xA;[CHG] Device 74:A3:4A:15:DD:71 Connected: no&#xD;&#xA;[bluetooth]# info 74:A3:4A:15:DD:71&#xD;&#xA;Device 74:A3:4A:15:DD:71&#xD;&#xA;        Name: Mi Pocket Speaker 2&#xD;&#xA;        Alias: Mi Pocket Speaker 2&#xD;&#xA;        Class: 0x240404&#xD;&#xA;        Icon: audio-card&#xD;&#xA;        Paired: yes&#xD;&#xA;        Trusted: no&#xD;&#xA;        Blocked: no&#xD;&#xA;        Connected: no&#xD;&#xA;        LegacyPairing: yes&#xD;&#xA;        UUID: Headset                   (00001108-0000-1000-8000-00805f9b34fb)&#xD;&#xA;        UUID: Audio Sink                (0000110b-0000-1000-8000-00805f9b34fb)&#xD;&#xA;        UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)&#xD;&#xA;        UUID: A/V Remote Control        (0000110e-0000-1000-8000-00805f9b34fb)&#xD;&#xA;        UUID: Handsfree                 (0000111e-0000-1000-8000-00805f9b34fb)&#xD;&#xA;[bluetooth]# trust 74:A3:4A:15:DD:71&#xD;&#xA;[CHG] Device 74:A3:4A:15:DD:71 Trusted: yes&#xD;&#xA;Changing 74:A3:4A:15:DD:71 trust succeeded&#xD;&#xA;[bluetooth]# info 74:A3:4A:15:DD:71&#xD;&#xA;Device 74:A3:4A:15:DD:71&#xD;&#xA;        Name: Mi Pocket Speaker 2&#xD;&#xA;        Alias: Mi Pocket Speaker 2&#xD;&#xA;        Class: 0x240404&#xD;&#xA;        Icon: audio-card&#xD;&#xA;        Paired: yes&#xD;&#xA;        Trusted: yes&#xD;&#xA;        Blocked: no&#xD;&#xA;        Connected: no&#xD;&#xA;        LegacyPairing: yes&#xD;&#xA;        UUID: Headset                   (00001108-0000-1000-8000-00805f9b34fb)&#xD;&#xA;        UUID: Audio Sink                (0000110b-0000-1000-8000-00805f9b34fb)&#xD;&#xA;        UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)&#xD;&#xA;        UUID: A/V Remote Control        (0000110e-0000-1000-8000-00805f9b34fb)&#xD;&#xA;        UUID: Handsfree                 (0000111e-0000-1000-8000-00805f9b34fb)&#xD;&#xA;[bluetooth]# quit&#xD;&#xA;&#xD;&#xA;pi@raspberrypi:~ $ sudo apt-get update &amp;amp;&amp;amp; sudo apt-get install pulseaudio -y&#xD;&#xA;pi@raspberrypi:~ $ mkdir -p scripts&#xD;&#xA;pi@raspberrypi:~ $ vim scripts/autopair&#xD;&#xA;#!/bin/bash&#xD;&#xA;bluetoothctl &amp;lt;&amp;lt; EOF&#xD;&#xA;connect [enter your MAC add]&#xD;&#xA;EOF&#xD;&#xA;pi@raspberrypi:~ $ chmod +x !$&#xD;&#xA;chmod +x scripts/autopair&#xD;&#xA;pi@raspberrypi:~ $ sudo vim /boot/config.txt&#xD;&#xA;#dtparam=audio=on&#xD;&#xA;pi@raspberrypi:~ $ vim ~/scripts/on.py&#xD;&#xA;#!/usr/bin/python```&#xD;&#xA;&#xD;&#xA;## Monitor removal of bluetooth reciever&#xD;&#xA;&#xD;&#xA;```import os&#xD;&#xA;import sys&#xD;&#xA;import subprocess&#xD;&#xA;import time&#xD;&#xA;def blue_it():&#xD;&#xA;    status = subprocess.call(&amp;#39;ls /dev/input/event0 2&amp;gt;/dev/null&amp;#39;, shell=True)&#xD;&#xA;    while status == 0:&#xD;&#xA;        print(&amp;#34;Bluetooth UP&amp;#34;)&#xD;&#xA;        print(status)&#xD;&#xA;        time.sleep(15)&#xD;&#xA;        status = subprocess.call(&amp;#39;ls /dev/input/event0 2&amp;gt;/dev/null&amp;#39;, shell=True)&#xD;&#xA;    else:&#xD;&#xA;        waiting()&#xD;&#xA;def waiting():&#xD;&#xA;    subprocess.call(&amp;#39;killall -9 pulseaudio&amp;#39;, shell=True)&#xD;&#xA;    time.sleep(3)&#xD;&#xA;    subprocess.call(&amp;#39;pulseaudio --start&amp;#39;, shell=True)&#xD;&#xA;    time.sleep(2)&#xD;&#xA;    status = subprocess.call(&amp;#39;ls /dev/input/event0 2&amp;gt;/dev/null&amp;#39;, shell=True)&#xD;&#xA;    while status == 2:&#xD;&#xA;        print(&amp;#34;Bluetooth DOWN&amp;#34;)&#xD;&#xA;        print(status)&#xD;&#xA;        subprocess.call(&amp;#39;~/scripts/autopair&amp;#39;, shell=True)&#xD;&#xA;        time.sleep(15)&#xD;&#xA;        status = subprocess.call(&amp;#39;ls /dev/input/event0 2&amp;gt;/dev/null&amp;#39;, shell=True)&#xD;&#xA;    else:&#xD;&#xA;        blue_it()&#xD;&#xA;blue_it()&#xD;&#xA;pi@raspberrypi:~ $chmod +x ~/scripts/on.py&#xD;&#xA;pi@raspberrypi:~ $vim ~/.bashrc&#xD;&#xA;pulseaudio --start&#xD;&#xA;wait&#xD;&#xA;~/python/on.py```&#xD;&#xA;&#xD;&#xA;### Reboot&#xD;&#xA;&#xD;&#xA;If the connection fails, remove the device and pair-trust-connect&#xD;&#xA;&#xD;&#xA;```remove aa:bb:cc:dd:ee:ff&#xD;&#xA;&#xD;&#xA;### Test the sound&#xD;&#xA;&#xD;&#xA;```pi@raspberrypi:~ $wget http://rpf.io/lamp3 -O example.mp3 --no-check-certificate&#xD;&#xA;pi@raspberrypi:~ $ omxplayer -o alsa ~/example.mp3```&#xD;&#xA;&#xD;&#xA;When you connect two Bluetooth devices together (i.e. you &amp;#34;pair&amp;#34; them) you only establish a connection between the two: network link, audio sink, audio source. If you connect your Pi to a Bluetooth audio source, it doesn&amp;#39;t necessarily mean you want to use the new audio sink at once. You need a different command for that.&#xD;&#xA;In short, under GNU/Linux in this very case:&#xD;&#xA;- there is a command for pairing Bluetooth devices&#xD;&#xA;- there is a command to select what audio device will play the sound&#xD;&#xA;&#xD;&#xA;These two do not overlap.&#xD;&#xA;Selecting what device plays sound is done through a dedicated application called PulseAudio daemon (a service that runs in the background), which manages sound on most GNU/Linux distributions. It doesn&amp;#39;t control Bluetooth, the latter of which is managed by the Bluez daemon. That&amp;#39;s why you have two separate commands.&#xD;&#xA;&#xD;&#xA;If you want to play audio through a recently paired Bluetooth audio device, here&amp;#39;s what to do:&#xD;&#xA;list audio sinks : pacmd list-sinks | grep -E &amp;#39;name:|index&amp;#39; . The * locates the currently selected sink. Note what follows name: for the Bluetooth device the Pi is connected to.&#xD;&#xA;set the default audio sink : pacmd set-default-sink &amp;lt;the name of the desired BT audio sink&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
  </channel>
</rss>
