<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  Raspberry Pi : Connect Bluetooth Speaker
  #

Connecting Raspberry Pi to Mi Pocket Speaker 2
[bluetooth]# power on
Changing power on succeeded
[bluetooth]# agent on
Agent registered
[bluetooth]# scan on
Discovery started
[CHG] Controller B8:27:EB:79:F6:B7 Discovering: yes
[bluetooth]# default-agent
Default agent request successful
[CHG] Device 00:EC:0A:57:F2:65 LegacyPairing: yes
[bluetooth]# list
Controller B8:27:EB:79:F6:B7 raspberrypi [default]
[bluetooth]# devices
Device 5C:72:FE:B7:35:FD 5C-72-FE-B7-35-FD
Device 28:F0:76:0A:B9:7B 28-F0-76-0A-B9-7B
Device 00:EC:0A:57:F2:65 Redmi
[NEW] Device 74:A3:4A:15:DD:71 Mi Pocket Speaker 2
[bluetooth]# pair 74:A3:4A:15:DD:71
Attempting to pair with 74:A3:4A:15:DD:71
[CHG] Device 74:A3:4A:15:DD:71 Connected: yes
[CHG] Device 74:A3:4A:15:DD:71 UUIDs:
        00001108-0000-1000-8000-00805f9b34fb
        0000110b-0000-1000-8000-00805f9b34fb
        0000110c-0000-1000-8000-00805f9b34fb
        0000110e-0000-1000-8000-00805f9b34fb
        0000111e-0000-1000-8000-00805f9b34fb
[CHG] Device 74:A3:4A:15:DD:71 Paired: yes
Pairing successful
[CHG] Device 74:A3:4A:15:DD:71 Connected: no
[bluetooth]# info 74:A3:4A:15:DD:71
Device 74:A3:4A:15:DD:71
        Name: Mi Pocket Speaker 2
        Alias: Mi Pocket Speaker 2
        Class: 0x240404
        Icon: audio-card
        Paired: yes
        Trusted: no
        Blocked: no
        Connected: no
        LegacyPairing: yes
        UUID: Headset                   (00001108-0000-1000-8000-00805f9b34fb)
        UUID: Audio Sink                (0000110b-0000-1000-8000-00805f9b34fb)
        UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)
        UUID: A/V Remote Control        (0000110e-0000-1000-8000-00805f9b34fb)
        UUID: Handsfree                 (0000111e-0000-1000-8000-00805f9b34fb)
[bluetooth]# trust 74:A3:4A:15:DD:71
[CHG] Device 74:A3:4A:15:DD:71 Trusted: yes
Changing 74:A3:4A:15:DD:71 trust succeeded
[bluetooth]# info 74:A3:4A:15:DD:71
Device 74:A3:4A:15:DD:71
        Name: Mi Pocket Speaker 2
        Alias: Mi Pocket Speaker 2
        Class: 0x240404
        Icon: audio-card
        Paired: yes
        Trusted: yes
        Blocked: no
        Connected: no
        LegacyPairing: yes
        UUID: Headset                   (00001108-0000-1000-8000-00805f9b34fb)
        UUID: Audio Sink                (0000110b-0000-1000-8000-00805f9b34fb)
        UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)
        UUID: A/V Remote Control        (0000110e-0000-1000-8000-00805f9b34fb)
        UUID: Handsfree                 (0000111e-0000-1000-8000-00805f9b34fb)
[bluetooth]# quit

pi@raspberrypi:~ $ sudo apt-get update &amp;&amp; sudo apt-get install pulseaudio -y
pi@raspberrypi:~ $ mkdir -p scripts
pi@raspberrypi:~ $ vim scripts/autopair
#!/bin/bash
bluetoothctl &lt;&lt; EOF
connect [enter your MAC add]
EOF
pi@raspberrypi:~ $ chmod &#43;x !$
chmod &#43;x scripts/autopair
pi@raspberrypi:~ $ sudo vim /boot/config.txt
#dtparam=audio=on
pi@raspberrypi:~ $ vim ~/scripts/on.py
#!/usr/bin/python```

## Monitor removal of bluetooth reciever

```import os
import sys
import subprocess
import time
def blue_it():
    status = subprocess.call(&#39;ls /dev/input/event0 2&gt;/dev/null&#39;, shell=True)
    while status == 0:
        print(&#34;Bluetooth UP&#34;)
        print(status)
        time.sleep(15)
        status = subprocess.call(&#39;ls /dev/input/event0 2&gt;/dev/null&#39;, shell=True)
    else:
        waiting()
def waiting():
    subprocess.call(&#39;killall -9 pulseaudio&#39;, shell=True)
    time.sleep(3)
    subprocess.call(&#39;pulseaudio --start&#39;, shell=True)
    time.sleep(2)
    status = subprocess.call(&#39;ls /dev/input/event0 2&gt;/dev/null&#39;, shell=True)
    while status == 2:
        print(&#34;Bluetooth DOWN&#34;)
        print(status)
        subprocess.call(&#39;~/scripts/autopair&#39;, shell=True)
        time.sleep(15)
        status = subprocess.call(&#39;ls /dev/input/event0 2&gt;/dev/null&#39;, shell=True)
    else:
        blue_it()
blue_it()
pi@raspberrypi:~ $chmod &#43;x ~/scripts/on.py
pi@raspberrypi:~ $vim ~/.bashrc
pulseaudio --start
wait
~/python/on.py```

### Reboot

If the connection fails, remove the device and pair-trust-connect

```remove aa:bb:cc:dd:ee:ff

### Test the sound

```pi@raspberrypi:~ $wget http://rpf.io/lamp3 -O example.mp3 --no-check-certificate
pi@raspberrypi:~ $ omxplayer -o alsa ~/example.mp3```

When you connect two Bluetooth devices together (i.e. you &#34;pair&#34; them) you only establish a connection between the two: network link, audio sink, audio source. If you connect your Pi to a Bluetooth audio source, it doesn&#39;t necessarily mean you want to use the new audio sink at once. You need a different command for that.
In short, under GNU/Linux in this very case:
- there is a command for pairing Bluetooth devices
- there is a command to select what audio device will play the sound

These two do not overlap.
Selecting what device plays sound is done through a dedicated application called PulseAudio daemon (a service that runs in the background), which manages sound on most GNU/Linux distributions. It doesn&#39;t control Bluetooth, the latter of which is managed by the Bluez daemon. That&#39;s why you have two separate commands.

If you want to play audio through a recently paired Bluetooth audio device, here&#39;s what to do:
list audio sinks : pacmd list-sinks | grep -E &#39;name:|index&#39; . The * locates the currently selected sink. Note what follows name: for the Bluetooth device the Pi is connected to.
set the default audio sink : pacmd set-default-sink &lt;the name of the desired BT audio sink&gt;
">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/docs/technology/bluetoothspeakerraspberrypi/">
  <meta property="og:site_name" content="Arshad Siddiqui">
  <meta property="og:title" content="Bluetooth Speaker">
  <meta property="og:description" content="Raspberry Pi : Connect Bluetooth Speaker # Connecting Raspberry Pi to Mi Pocket Speaker 2
[bluetooth]# power onChanging power on succeeded[bluetooth]# agent onAgent registered[bluetooth]# scan onDiscovery started[CHG] Controller B8:27:EB:79:F6:B7 Discovering: yes[bluetooth]# default-agentDefault agent request successful[CHG] Device 00:EC:0A:57:F2:65 LegacyPairing: yes[bluetooth]# listController B8:27:EB:79:F6:B7 raspberrypi [default][bluetooth]# devicesDevice 5C:72:FE:B7:35:FD 5C-72-FE-B7-35-FDDevice 28:F0:76:0A:B9:7B 28-F0-76-0A-B9-7BDevice 00:EC:0A:57:F2:65 Redmi[NEW] Device 74:A3:4A:15:DD:71 Mi Pocket Speaker 2[bluetooth]# pair 74:A3:4A:15:DD:71Attempting to pair with 74:A3:4A:15:DD:71[CHG] Device 74:A3:4A:15:DD:71 Connected: yes[CHG] Device 74:A3:4A:15:DD:71 UUIDs:00001108-0000-1000-8000-00805f9b34fb0000110b-0000-1000-8000-00805f9b34fb0000110c-0000-1000-8000-00805f9b34fb0000110e-0000-1000-8000-00805f9b34fb0000111e-0000-1000-8000-00805f9b34fb[CHG] Device 74:A3:4A:15:DD:71 Paired: yesPairing successful[CHG] Device 74:A3:4A:15:DD:71 Connected: no[bluetooth]# info 74:A3:4A:15:DD:71Device 74:A3:4A:15:DD:71Name: Mi Pocket Speaker 2Alias: Mi Pocket Speaker 2Class: 0x240404Icon: audio-cardPaired: yesTrusted: noBlocked: noConnected: noLegacyPairing: yesUUID: Headset (00001108-0000-1000-8000-00805f9b34fb)UUID: Audio Sink (0000110b-0000-1000-8000-00805f9b34fb)UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)UUID: A/V Remote Control (0000110e-0000-1000-8000-00805f9b34fb)UUID: Handsfree (0000111e-0000-1000-8000-00805f9b34fb)[bluetooth]# trust 74:A3:4A:15:DD:71[CHG] Device 74:A3:4A:15:DD:71 Trusted: yesChanging 74:A3:4A:15:DD:71 trust succeeded[bluetooth]# info 74:A3:4A:15:DD:71Device 74:A3:4A:15:DD:71Name: Mi Pocket Speaker 2Alias: Mi Pocket Speaker 2Class: 0x240404Icon: audio-cardPaired: yesTrusted: yesBlocked: noConnected: noLegacyPairing: yesUUID: Headset (00001108-0000-1000-8000-00805f9b34fb)UUID: Audio Sink (0000110b-0000-1000-8000-00805f9b34fb)UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)UUID: A/V Remote Control (0000110e-0000-1000-8000-00805f9b34fb)UUID: Handsfree (0000111e-0000-1000-8000-00805f9b34fb)[bluetooth]# quitpi@raspberrypi:~ $ sudo apt-get update &amp;&amp; sudo apt-get install pulseaudio -ypi@raspberrypi:~ $ mkdir -p scriptspi@raspberrypi:~ $ vim scripts/autopair#!/bin/bashbluetoothctl &lt;&lt; EOFconnect [enter your MAC add]EOFpi@raspberrypi:~ $ chmod &#43;x !$chmod &#43;x scripts/autopairpi@raspberrypi:~ $ sudo vim /boot/config.txt#dtparam=audio=onpi@raspberrypi:~ $ vim ~/scripts/on.py#!/usr/bin/python```## Monitor removal of bluetooth reciever```import osimport sysimport subprocessimport timedef blue_it():status = subprocess.call(&#39;ls /dev/input/event0 2&gt;/dev/null&#39;, shell=True)while status == 0:print(&#34;Bluetooth UP&#34;)print(status)time.sleep(15)status = subprocess.call(&#39;ls /dev/input/event0 2&gt;/dev/null&#39;, shell=True)else:waiting()def waiting():subprocess.call(&#39;killall -9 pulseaudio&#39;, shell=True)time.sleep(3)subprocess.call(&#39;pulseaudio --start&#39;, shell=True)time.sleep(2)status = subprocess.call(&#39;ls /dev/input/event0 2&gt;/dev/null&#39;, shell=True)while status == 2:print(&#34;Bluetooth DOWN&#34;)print(status)subprocess.call(&#39;~/scripts/autopair&#39;, shell=True)time.sleep(15)status = subprocess.call(&#39;ls /dev/input/event0 2&gt;/dev/null&#39;, shell=True)else:blue_it()blue_it()pi@raspberrypi:~ $chmod &#43;x ~/scripts/on.pypi@raspberrypi:~ $vim ~/.bashrcpulseaudio --startwait~/python/on.py```### RebootIf the connection fails, remove the device and pair-trust-connect```remove aa:bb:cc:dd:ee:ff### Test the sound```pi@raspberrypi:~ $wget http://rpf.io/lamp3 -O example.mp3 --no-check-certificatepi@raspberrypi:~ $ omxplayer -o alsa ~/example.mp3```When you connect two Bluetooth devices together (i.e. you &#34;pair&#34; them) you only establish a connection between the two: network link, audio sink, audio source. If you connect your Pi to a Bluetooth audio source, it doesn&#39;t necessarily mean you want to use the new audio sink at once. You need a different command for that.In short, under GNU/Linux in this very case:- there is a command for pairing Bluetooth devices- there is a command to select what audio device will play the soundThese two do not overlap.Selecting what device plays sound is done through a dedicated application called PulseAudio daemon (a service that runs in the background), which manages sound on most GNU/Linux distributions. It doesn&#39;t control Bluetooth, the latter of which is managed by the Bluez daemon. That&#39;s why you have two separate commands.If you want to play audio through a recently paired Bluetooth audio device, here&#39;s what to do:list audio sinks : pacmd list-sinks | grep -E &#39;name:|index&#39; . The * locates the currently selected sink. Note what follows name: for the Bluetooth device the Pi is connected to.set the default audio sink : pacmd set-default-sink &lt;the name of the desired BT audio sink&gt;">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:published_time" content="2018-11-13T20:45:00+00:00">
    <meta property="article:modified_time" content="2018-11-13T20:45:00+00:00">
    <meta property="article:tag" content="RaspberryPi">
    <meta property="article:tag" content="Speaker">
    <meta property="article:tag" content="Bluetooth">
<title>Bluetooth Speaker | Arshad Siddiqui</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/docs/technology/bluetoothspeakerraspberrypi/">
<link rel="stylesheet" href="/book.min.d5e59cb0aa8d22a5813c62cd5e25d3d172489a369c61dc3f622ee96ae1ebb457.css" integrity="sha256-1eWcsKqNIqWBPGLNXiXT0XJImjacYdw/Yi7pauHrtFc=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.921788d278049ae0d94406ce37b038af83c5ec8d8bdbd358986bfdc0e55884c9.js" integrity="sha256-kheI0ngEmuDZRAbON7A4r4PF7I2L29NYmGv9wOVYhMk=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Arshad Siddiqui</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>















  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-153b7cc6ef015940e3e29189ceb1fb32" class="toggle"  />
    <label for="section-153b7cc6ef015940e3e29189ceb1fb32" class="flex">
      <a href="/docs/ai/" class="flex-auto ">Artificial Intelligence</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/ai/terminology/" class="">AI Terminology</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3aee3e7ca814290041fc35498c1ffb01" class="toggle" checked />
    <label for="section-3aee3e7ca814290041fc35498c1ffb01" class="flex">
      <a href="/docs/technology/" class="flex-auto ">Technology</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/hugo/" class="">Hugo Notes</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/gitcheatsheet/" class="">GIT</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/bananapi/" class="">Home Cloud</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/bluetoothspeakerraspberrypi/" class="active">Bluetooth Speaker</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/sshkeygithub/" class="">GitHub</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/dropboxwithraspberrypi/" class="">Dropbox</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/homecloudbananapi/" class="">Home Cloud</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/sshwithraspberrypi/" class="">SSH</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/bootupraspberrypi/" class="">Bootup Script</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/emailwithraspberrypi/" class="">e-mail</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/surveillanceraspberrypi/" class="">Surveillance</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/wifionraspberrypi/" class="">WiFi</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/camerawithraspberrypi/" class="">Camera</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/nfsonraspberrypi/" class="">NFS</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/vnconraspberrypi/" class="">VNC</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/technology/raspberrypisetup/" class="">Raspberry Pi</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-63bd1218af2ab07d46417a819a4c3b84" class="toggle"  />
    <label for="section-63bd1218af2ab07d46417a819a4c3b84" class="flex">
      <a href="/docs/arabic/" class="flex-auto ">Arabic</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/arabic/conversationstarter/" class="">Conversation Starters</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/arabic/grammar/" class="">Grammar Terminology</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/arabic/imperative/" class="">Imperative</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d4bfbceae9461def8b09f7f36daf4ab4" class="toggle"  />
    <label for="section-d4bfbceae9461def8b09f7f36daf4ab4" class="flex">
      <a href="/docs/arabic/verb/" class="flex-auto ">Verb</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/arabic/verb/verbpatterns/" class="">Verb Patterns</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/arabic/verb/verbs/" class="">Verbs</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/arabic/verb/verbforms/" class="">10 Arabic Verb Forms</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-7d8e14eaa57228cbc568c0d19c662974" class="toggle"  />
    <label for="section-7d8e14eaa57228cbc568c0d19c662974" class="flex">
      <a href="/docs/recipe/" class="flex-auto ">Recipe</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-79ebe8d8bdad2a5118424b83ec3fee36" class="toggle"  />
    <label for="section-79ebe8d8bdad2a5118424b83ec3fee36" class="flex">
      <a href="/docs/recipe/bbq/" class="flex-auto ">BBQ</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/bbq/muttontikka/" class="">Kashmiri Mutton Tikka (Seekh Tuji)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/bbq/biharikebab/" class="">Bihari Kebab</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/bbq/roastlambleg/" class="">Spiced Roast Leg of Lamb (Tandoori Raan)</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-51d7ea40d66eec336c5941ae09808521" class="toggle"  />
    <label for="section-51d7ea40d66eec336c5941ae09808521" class="flex">
      <a href="/docs/recipe/bread/" class="flex-auto ">Bread</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/bread/kashmiriroti/" class="">Kashmiri Czot</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/bread/naan/" class="">Naan with Nihari</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-7eb4f7ce28d0e16d198d88ca5cb3c75e" class="toggle"  />
    <label for="section-7eb4f7ce28d0e16d198d88ca5cb3c75e" class="flex">
      <a href="/docs/recipe/cake/" class="flex-auto ">Cake</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/cake/redvelvetcake/" class="">Red Velvet Cake</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/cake/blackforestcake/" class="">Black Forest Cake</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/cake/chocolatecakewithganache/" class="">Chocolate Cake with Ganache</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/cake/plumcake/" class="">Plum Cake</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/cake/chickenpie/" class="">Chicken Pie</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/cake/cherryalmondcake/" class="">Cherry and Almond Cake</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/cake/chickencasserole/" class="">Mediterranean Chicken Casserole in Oven</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/cake/chickentikkamasala/" class="">Chicken Tikka Masala</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/cake/chickenchickpeas/" class="">Chicken Chickpeas Curry (Murgh Cholay)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/cake/mintchickencurry/" class="">Mint Chicken Curry (Pudina Murgh)</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-416c569f7acc103ad334d8d6f6f6c519" class="toggle"  />
    <label for="section-416c569f7acc103ad334d8d6f6f6c519" class="flex">
      <a href="/docs/recipe/chicken/" class="flex-auto ">Chicken</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/chicken/raselhanoutchicken/" class="">Chicken in Ras el Hanout</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/chicken/sidschickencurry/" class="">Sid&#39;s Chicken Curry</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-789c381090438ad7896ae734d39f3643" class="toggle"  />
    <label for="section-789c381090438ad7896ae734d39f3643" class="flex">
      <a href="/docs/recipe/dessert/" class="flex-auto ">Dessert</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/dessert/chocolatechipcookies/" class="">Chocolate Chip Cookies</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/dessert/knafeh/" class="">Knafeh</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/dessert/chocochipcookies/" class="">Chewy Chocolate Chip Cookies</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/dessert/datetruffles/" class="">Date Truffles</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/dessert/tiramisu/" class="">Tiramisu</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-05311c347db678a3d45d58672c4b4505" class="toggle"  />
    <label for="section-05311c347db678a3d45d58672c4b4505" class="flex">
      <a href="/docs/recipe/lamb/" class="flex-auto ">Lamb</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/lamb/haandighosht/" class="">Haandi Aloo Ghosht</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/lamb/karahighosht/" class="">Karahi Ghosht</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/lamb/lambstew/" class="">Lamb Stew - Khushi Style</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/lamb/pumpkincasserole/" class="">Pumpkin Casserole</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/lamb/harissa/" class="">Harissa</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/lamb/chardgosht/" class="">Chard Gosht</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b27e98a326ec83052fabd9d47e958c4d" class="toggle"  />
    <label for="section-b27e98a326ec83052fabd9d47e958c4d" class="flex">
      <a href="/docs/recipe/rice/" class="flex-auto ">Rice</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/rice/maqluba/" class="">Maqluba (Upside-Down Rice Casserole)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/rice/sheermal/" class="">Sheermal</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/rice/peaspulao/" class="">Peas Pulao</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/rice/biryani-lucknow-or-hyderabad/" class="">Biryani â€“ Lucknow or Hyderabad?</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/rice/yakhnibiryani/" class="">Yakhni Biryani</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/rice/tehri/" class="">Tehri</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-025e04843124596c2f47474c6c41332b" class="toggle"  />
    <label for="section-025e04843124596c2f47474c6c41332b" class="flex">
      <a href="/docs/recipe/soup/" class="flex-auto ">Soup</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/soup/redlentilsoup/" class="">Red Lentil Soup (Kirmizi Mercimek Corbasi)</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-66fe43d7277d34fa10a6743c0692b309" class="toggle"  />
    <label for="section-66fe43d7277d34fa10a6743c0692b309" class="flex">
      <a href="/docs/recipe/veg/" class="flex-auto ">Vegetarian</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/veg/dalbati/" class="">Rajasthani Dal Bati</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/veg/eggcurry/" class="">Egg Curry</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/veg/paneerbuttermasala-ii/" class="">Paneer Butter Masala</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/veg/shahipaneer/" class="">Shahi Paneer</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/veg/hummus/" class="">Hummus</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/veg/stuffedokra/" class="">Bharwa Bhindi (Stuffed Okra)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/veg/paneerbuttermasala/" class="">Paneer Butter Masala</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/recipe/veg/rajasthanidaal/" class="">Rajasthani Daal</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f0e2067142bb70ed4a20b59279bc56ed" class="toggle"  />
    <label for="section-f0e2067142bb70ed4a20b59279bc56ed" class="flex">
      <a href="/docs/journey/" class="flex-auto ">Journeys &amp; Jottings</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/journey/dua/" class="">Post-Salah Duas</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/journey/hello-world/" class="">Hello World!</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/about/" class="">About Me</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/resume/" class="">Resume</a>
  

        </li>
      
    
  </ul>














</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>Bluetooth Speaker</h3>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents"></nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="raspberry-pi--connect-bluetooth-speaker">
  Raspberry Pi : Connect Bluetooth Speaker
  <a class="anchor" href="#raspberry-pi--connect-bluetooth-speaker">#</a>
</h1>
<p>Connecting Raspberry Pi to Mi Pocket Speaker 2</p>
<pre tabindex="0"><code class="language-pi@raspberrypi:~" data-lang="pi@raspberrypi:~">[bluetooth]# power on
Changing power on succeeded
[bluetooth]# agent on
Agent registered
[bluetooth]# scan on
Discovery started
[CHG] Controller B8:27:EB:79:F6:B7 Discovering: yes
[bluetooth]# default-agent
Default agent request successful
[CHG] Device 00:EC:0A:57:F2:65 LegacyPairing: yes
[bluetooth]# list
Controller B8:27:EB:79:F6:B7 raspberrypi [default]
[bluetooth]# devices
Device 5C:72:FE:B7:35:FD 5C-72-FE-B7-35-FD
Device 28:F0:76:0A:B9:7B 28-F0-76-0A-B9-7B
Device 00:EC:0A:57:F2:65 Redmi
[NEW] Device 74:A3:4A:15:DD:71 Mi Pocket Speaker 2
[bluetooth]# pair 74:A3:4A:15:DD:71
Attempting to pair with 74:A3:4A:15:DD:71
[CHG] Device 74:A3:4A:15:DD:71 Connected: yes
[CHG] Device 74:A3:4A:15:DD:71 UUIDs:
        00001108-0000-1000-8000-00805f9b34fb
        0000110b-0000-1000-8000-00805f9b34fb
        0000110c-0000-1000-8000-00805f9b34fb
        0000110e-0000-1000-8000-00805f9b34fb
        0000111e-0000-1000-8000-00805f9b34fb
[CHG] Device 74:A3:4A:15:DD:71 Paired: yes
Pairing successful
[CHG] Device 74:A3:4A:15:DD:71 Connected: no
[bluetooth]# info 74:A3:4A:15:DD:71
Device 74:A3:4A:15:DD:71
        Name: Mi Pocket Speaker 2
        Alias: Mi Pocket Speaker 2
        Class: 0x240404
        Icon: audio-card
        Paired: yes
        Trusted: no
        Blocked: no
        Connected: no
        LegacyPairing: yes
        UUID: Headset                   (00001108-0000-1000-8000-00805f9b34fb)
        UUID: Audio Sink                (0000110b-0000-1000-8000-00805f9b34fb)
        UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)
        UUID: A/V Remote Control        (0000110e-0000-1000-8000-00805f9b34fb)
        UUID: Handsfree                 (0000111e-0000-1000-8000-00805f9b34fb)
[bluetooth]# trust 74:A3:4A:15:DD:71
[CHG] Device 74:A3:4A:15:DD:71 Trusted: yes
Changing 74:A3:4A:15:DD:71 trust succeeded
[bluetooth]# info 74:A3:4A:15:DD:71
Device 74:A3:4A:15:DD:71
        Name: Mi Pocket Speaker 2
        Alias: Mi Pocket Speaker 2
        Class: 0x240404
        Icon: audio-card
        Paired: yes
        Trusted: yes
        Blocked: no
        Connected: no
        LegacyPairing: yes
        UUID: Headset                   (00001108-0000-1000-8000-00805f9b34fb)
        UUID: Audio Sink                (0000110b-0000-1000-8000-00805f9b34fb)
        UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)
        UUID: A/V Remote Control        (0000110e-0000-1000-8000-00805f9b34fb)
        UUID: Handsfree                 (0000111e-0000-1000-8000-00805f9b34fb)
[bluetooth]# quit

pi@raspberrypi:~ $ sudo apt-get update &amp;&amp; sudo apt-get install pulseaudio -y
pi@raspberrypi:~ $ mkdir -p scripts
pi@raspberrypi:~ $ vim scripts/autopair
#!/bin/bash
bluetoothctl &lt;&lt; EOF
connect [enter your MAC add]
EOF
pi@raspberrypi:~ $ chmod +x !$
chmod +x scripts/autopair
pi@raspberrypi:~ $ sudo vim /boot/config.txt
#dtparam=audio=on
pi@raspberrypi:~ $ vim ~/scripts/on.py
#!/usr/bin/python```

## Monitor removal of bluetooth reciever

```import os
import sys
import subprocess
import time
def blue_it():
    status = subprocess.call(&#39;ls /dev/input/event0 2&gt;/dev/null&#39;, shell=True)
    while status == 0:
        print(&#34;Bluetooth UP&#34;)
        print(status)
        time.sleep(15)
        status = subprocess.call(&#39;ls /dev/input/event0 2&gt;/dev/null&#39;, shell=True)
    else:
        waiting()
def waiting():
    subprocess.call(&#39;killall -9 pulseaudio&#39;, shell=True)
    time.sleep(3)
    subprocess.call(&#39;pulseaudio --start&#39;, shell=True)
    time.sleep(2)
    status = subprocess.call(&#39;ls /dev/input/event0 2&gt;/dev/null&#39;, shell=True)
    while status == 2:
        print(&#34;Bluetooth DOWN&#34;)
        print(status)
        subprocess.call(&#39;~/scripts/autopair&#39;, shell=True)
        time.sleep(15)
        status = subprocess.call(&#39;ls /dev/input/event0 2&gt;/dev/null&#39;, shell=True)
    else:
        blue_it()
blue_it()
pi@raspberrypi:~ $chmod +x ~/scripts/on.py
pi@raspberrypi:~ $vim ~/.bashrc
pulseaudio --start
wait
~/python/on.py```

### Reboot

If the connection fails, remove the device and pair-trust-connect

```remove aa:bb:cc:dd:ee:ff

### Test the sound

```pi@raspberrypi:~ $wget http://rpf.io/lamp3 -O example.mp3 --no-check-certificate
pi@raspberrypi:~ $ omxplayer -o alsa ~/example.mp3```

When you connect two Bluetooth devices together (i.e. you &#34;pair&#34; them) you only establish a connection between the two: network link, audio sink, audio source. If you connect your Pi to a Bluetooth audio source, it doesn&#39;t necessarily mean you want to use the new audio sink at once. You need a different command for that.
In short, under GNU/Linux in this very case:
- there is a command for pairing Bluetooth devices
- there is a command to select what audio device will play the sound

These two do not overlap.
Selecting what device plays sound is done through a dedicated application called PulseAudio daemon (a service that runs in the background), which manages sound on most GNU/Linux distributions. It doesn&#39;t control Bluetooth, the latter of which is managed by the Bluez daemon. That&#39;s why you have two separate commands.

If you want to play audio through a recently paired Bluetooth audio device, here&#39;s what to do:
list audio sinks : pacmd list-sinks | grep -E &#39;name:|index&#39; . The * locates the currently selected sink. Note what follows name: for the Bluetooth device the Pi is connected to.
set the default audio sink : pacmd set-default-sink &lt;the name of the desired BT audio sink&gt;
</code></pre></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents"></nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












